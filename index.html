<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spektra install - Protokol o odovzdaní zariadenia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f8fafc;
            color: #1e293b;
            -webkit-tap-highlight-color: transparent;
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            .page-container { 
                border: none !important; 
                box-shadow: none !important; 
                width: 100%; 
                max-width: 100%; 
                margin: 0; 
                padding: 4mm;
            }
            .section-header { 
                background-color: #f8fafc !important; 
                color: #e11d48 !important; 
                border-bottom: 2px solid #e11d48 !important;
                -webkit-print-color-adjust: exact; 
                print-color-adjust: exact;
            }
            input, select, textarea { 
                border: none !important; 
                background: transparent !important; 
                appearance: none;
            }
            .device-section { display: none; }
            .device-section.active { display: block !important; }
            canvas { border: 1px solid #eee !important; }
        }

        .section-header { 
            background-color: #f1f5f9; 
            color: #e11d48; 
            padding: 8px 12px; 
            font-weight: 900; 
            text-transform: uppercase; 
            font-size: 11px; 
            letter-spacing: 0.8px; 
            border-left: 5px solid #e11d48; 
            margin-top: 16px; 
            margin-bottom: 8px;
        }

        /* Väčšie polia pre mobil (min 16px zabráni auto-zoomu na iOS) */
        .input-field { 
            border: 1px solid #e2e8f0; 
            padding: 8px 10px; 
            font-size: 16px; 
            width: 100%; 
            border-radius: 6px; 
            outline: none; 
            background-color: #ffffff;
        }

        @media (min-width: 768px) {
            .input-field { font-size: 13px; padding: 4px 8px; }
            .section-header { font-size: 10px; padding: 4px 12px; }
        }

        .label-text { 
            font-size: 10px; 
            font-weight: 800; 
            color: #64748b; 
            text-transform: uppercase; 
            margin-bottom: 3px;
            display: block;
        }

        .checkbox-custom {
            width: 22px;
            height: 22px;
            accent-color: #e11d48;
        }

        @media (min-width: 768px) {
            .checkbox-custom { width: 14px; height: 14px; }
        }

        .device-section { display: none; }
        .device-section.active { display: block; }

        .measuring-table th { font-size: 9px; background: #f8fafc; padding: 6px; text-align: center; border: 1px solid #e2e8f0; }
        .measuring-table td { border: 1px solid #e2e8f0; padding: 4px; }
        .measuring-table input { text-align: center; font-weight: bold; font-size: 14px; width: 100%; }

        @media (min-width: 768px) {
            .measuring-table input { font-size: 11px; }
            .measuring-table th { font-size: 8px; padding: 4px; }
        }

        /* Podpisová plocha */
        .signature-pad {
            border: 2px solid #e2e8f0;
            background-color: #ffffff;
            width: 100%;
            height: 180px;
            cursor: crosshair;
            touch-action: none;
            border-radius: 8px;
        }

        @media (min-width: 768px) {
            .signature-pad { height: 120px; border-width: 1px; }
        }

        /* Prispôsobenie selectu */
        #deviceSelector {
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1em;
            padding-right: 2.5rem;
        }
    </style>
</head>
<body class="p-0 md:p-4">

    <div class="page-container max-w-[900px] mx-auto bg-white shadow-xl border-t-[8px] border-red-600 p-4 md:p-10 min-h-screen rounded-b-lg">
        
        <!-- HLAVIČKA FIRMY -->
        <div class="flex flex-col md:flex-row justify-between items-start border-b border-zinc-200 pb-6 mb-4">
            <div class="flex flex-col md:flex-row gap-5 w-full md:w-auto">
                <div>
                    <h1 class="text-red-600 font-[900] text-3xl italic leading-none tracking-tighter uppercase">SPEKTRA <span class="text-slate-700 font-black">install</span></h1>
                    <p class="text-[10px] font-extrabold uppercase tracking-[0.1em] text-slate-400 mt-1 italic leading-none">Váš partner pre tepelné čerpadlá a kotly</p>
                </div>
                <div class="text-[10px] md:text-[8.5px] text-slate-500 md:border-l md:pl-4 border-slate-200 leading-tight space-y-1">
                    <p class="font-black text-slate-700 uppercase text-[11px] md:text-[9.5px]">Spektra install s.r.o.</p>
                    <p>Prevádzka: Hollého 210, 015 01 Rajec</p>
                    <p>IČO: 535690036 | Email: spektrainstall@gmail.com</p>
                    <div class="flex items-center gap-1 mt-2 font-bold text-red-600 uppercase tracking-tighter">
                        <span>Č. protokolu:</span>
                        <input type="text" class="bg-red-50 px-2 py-1 rounded border-none outline-none w-32 font-black text-red-700 text-sm md:text-base" value="POZ2026001">
                    </div>
                </div>
            </div>
            <div class="text-left md:text-right mt-6 md:mt-0 w-full md:w-auto">
                <h2 class="text-lg font-black uppercase text-slate-800 tracking-tight leading-none mb-3 md:mb-2">Protokol o odovzdaní</h2>
                <div class="flex flex-col md:items-end gap-1.5">
                    <span class="text-[9px] font-bold text-slate-400 uppercase mb-0.5">Zvoľte Typ zariadenia:</span>
                    <select id="deviceSelector" onchange="updateDeviceView()" class="w-full md:w-auto font-black text-red-600 border-2 border-red-600 rounded-lg px-4 py-3 md:px-2 md:py-1 italic bg-white outline-none text-base md:text-[12px] cursor-pointer shadow-sm">
                        <option value="tc">Tepelné čerpadlo</option>
                        <option value="plyn">Plynový kotol</option>
                        <option value="elektro">Elektrický kotol</option>
                        <option value="pelety">Peletový kotol</option>
                    </select>
                </div>
            </div>
        </div>

        <form id="protocolForm">
            <!-- 01. VŠEOBECNÉ INFO -->
            <div class="section-header">01. Všeobecné informácie</div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-1.5">
                <div><label class="label-text">Dátum spustenia</label><input type="date" class="input-field" value="2026-02-21"></div>
                <div class="md:col-span-2"><label class="label-text">Adresa inštalácie</label><input type="text" class="input-field" placeholder="Miesto realizácie"></div>
                <div><label class="label-text">Meno Zákazníka</label><input type="text" class="input-field"></div>
                <div><label class="label-text">Telefónny kontakt</label><input type="tel" class="input-field"></div>
                <div><label class="label-text">Značka / Výrobca</label><input type="text" class="input-field" placeholder="napr. Vaillant"></div>
            </div>

            <!-- SEKCIA: TEPELNÉ ČERPADLO -->
            <div id="section-tc" class="device-section active">
                <div class="section-header">02. Merania - Tepelné čerpadlo</div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-1.5 mb-4">
                    <div class="bg-slate-50 p-3 rounded-lg border">
                        <label class="label-text">Vonkajšia j. (Model / SN)</label>
                        <input type="text" class="input-field font-bold">
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border">
                        <label class="label-text">Vnútorná j. (Model / SN)</label>
                        <input type="text" class="input-field font-bold">
                    </div>
                </div>

                <!-- Tabuľka Napätí - Scrollable na mobile -->
                <div class="p-1.5 overflow-x-auto">
                    <label class="label-text text-red-600 mb-2">Elektrické meranie napätia (V) - <span class="italic text-[8px] text-slate-400">posuňte doprava ak nevidíte všetko</span></label>
                    <table class="min-w-[600px] w-full measuring-table text-xs">
                        <thead>
                            <tr>
                                <th rowspan="2">Stav zariadenia</th>
                                <th colspan="3">Medzi fázami (V)</th>
                                <th colspan="3">Fáza voči Nule (V)</th>
                            </tr>
                            <tr>
                                <th>L1/L2</th>
                                <th>L2/L3</th>
                                <th>L3/L1</th>
                                <th>L1/N</th>
                                <th>L2/N</th>
                                <th>L3/N</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="p-2 font-bold bg-slate-50">Vypnuté</td>
                                <td><input type="text" class="bg-transparent"></td>
                                <td><input type="text" class="bg-transparent"></td>
                                <td><input type="text" class="bg-transparent"></td>
                                <td><input type="text" class="bg-transparent"></td>
                                <td><input type="text" class="bg-transparent"></td>
                                <td><input type="text" class="bg-transparent"></td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold bg-slate-50 text-red-600">V Prevádzke</td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                                <td><input type="text" class="bg-transparent text-red-600"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-1.5 mt-4">
                    <div class="bg-slate-50 p-3 rounded-lg border">
                        <label class="label-text">Prevádzkový prúd (A)</label>
                        <div class="grid grid-cols-3 gap-3">
                            <div><label class="text-[9px] font-bold">L1</label><input type="text" class="input-field text-center font-bold text-red-600"></div>
                            <div><label class="text-[9px] font-bold">L2</label><input type="text" class="input-field text-center font-bold text-red-600"></div>
                            <div><label class="text-[9px] font-bold">L3</label><input type="text" class="input-field text-center font-bold text-red-600"></div>
                        </div>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border">
                        <label class="label-text">Tlaky chladiva (bar)</label>
                        <div class="grid grid-cols-2 gap-3">
                            <div><label class="text-[9px] font-bold">Vysoký (HP)</label><input type="text" class="input-field text-center font-bold"></div>
                            <div><label class="text-[9px] font-bold">Nízky (LP)</label><input type="text" class="input-field text-center font-bold"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEKCIA: PLYNOVÝ KOTOL -->
            <div id="section-plyn" class="device-section">
                <div class="section-header">02. Analýza - Plynový kotol</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-1.5">
                    <div class="bg-slate-50 p-3 rounded-lg border"><label class="label-text">Model a Sériové číslo</label><input type="text" class="input-field font-bold"></div>
                    <div class="bg-slate-50 p-3 rounded-lg border"><label class="label-text">Výkon kotla (kW)</label><input type="text" class="input-field text-center font-bold"></div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 p-1.5 mt-4">
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text">O2 (%)</label><input type="text" class="input-field"></div>
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text text-red-600">CO2 (%)</label><input type="text" class="input-field font-bold text-red-600 text-center"></div>
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text">CO (ppm)</label><input type="text" class="input-field text-center"></div>
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text">Stat. Tlak (mbar)</label><input type="text" class="input-field"></div>
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text">Dyn. Tlak (mbar)</label><input type="text" class="input-field"></div>
                    <div class="bg-slate-50 p-2 border rounded-lg"><label class="label-text">Teplota spalín</label><input type="text" class="input-field"></div>
                </div>
            </div>

            <!-- SEKCIA: ELEKTRICKÝ KOTOL -->
            <div id="section-elektro" class="device-section">
                <div class="section-header">02. Prúdy - Elektrický kotol</div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-1.5 mt-2">
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text">Prúd L1 (A)</label><input type="text" class="input-field font-bold text-red-600 text-center"></div>
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text">Prúd L2 (A)</label><input type="text" class="input-field font-bold text-red-600 text-center"></div>
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text">Prúd L3 (A)</label><input type="text" class="input-field font-bold text-red-600 text-center"></div>
                </div>
            </div>

            <!-- SEKCIA: PELETOVÝ KOTOL -->
            <div id="section-pelety" class="device-section">
                <div class="section-header">02. Spaľovanie - Peletový kotol</div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-1.5 mt-2">
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text">Dávkovanie (%)</label><input type="text" class="input-field text-center"></div>
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text">Ventilátor (%)</label><input type="text" class="input-field text-center"></div>
                    <div class="bg-slate-50 p-3 border rounded-lg"><label class="label-text text-red-600">Účinnosť (%)</label><input type="text" class="input-field font-bold text-red-600 text-center"></div>
                </div>
            </div>

            <!-- SPOLOČNÁ ELEKTRIKA -->
            <div class="section-header">03. Inštalácia a Káble</div>
            <div class="p-1.5 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-4">
                    <div class="bg-slate-50 p-3 border rounded-lg">
                        <label class="label-text text-red-600 font-black">Istenie (Presné označenie):</label>
                        <input type="text" class="input-field border-red-200" placeholder="napr. B25/3 + chránič">
                    </div>
                    <div class="bg-slate-50 p-3 border rounded-lg">
                        <label class="label-text">Napájací kábel:</label>
                        <input type="text" class="input-field" placeholder="napr. CYKY-J 5x2,5">
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="bg-slate-50 p-3 border rounded-lg">
                        <label class="label-text">Komunikačný kábel:</label>
                        <input type="text" class="input-field" placeholder="napr. LiYCY 2x0,75">
                    </div>
                    <div class="bg-slate-50 p-3 border rounded-lg flex items-center justify-between">
                        <label class="label-text text-slate-500 mb-0">Magnetický filter:</label>
                        <div class="flex items-center gap-2">
                            <span class="text-xs font-bold uppercase">Namontovaný</span>
                            <input type="checkbox" checked class="checkbox-custom">
                        </div>
                    </div>
                </div>
            </div>

            <!-- CERTIFIKÁTY -->
            <div class="mt-8 p-5 border border-red-200 bg-red-50 rounded-xl relative">
                <h3 class="text-[11px] font-black uppercase text-red-600 italic mb-2 border-b border-red-200 pb-1 underline decoration-2">Odborné prehlásenie</h3>
                <p class="text-[10px] md:text-[8.5px] leading-relaxed text-slate-700 italic mb-4">
                    Zariadenie bolo odovzdané ako funkčný celok podľa noriem STN EN 378, STN 33 2000-6 a STN EN 1775. Je schopné bezpečnej prevádzke a užívateľ bol zaškolený.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="bg-white p-3 rounded-lg border shadow-sm"><span class="label-text text-red-500">Chladiar:</span><span class="text-xs font-black italic">10637</span></div>
                    <div class="bg-white p-3 rounded-lg border shadow-sm"><span class="label-text text-red-500">Elektro §22:</span><span class="text-xs font-black italic">18122868</span></div>
                    <div class="bg-white p-3 rounded-lg border shadow-sm"><span class="label-text text-red-500">Plyn:</span><span class="text-xs font-black tracking-tighter italic">077/2/2021-PZ-Bd,f,g,h</span></div>
                </div>
            </div>

            <!-- DIGITÁLNE PODPISY -->
            <div class="mt-10 grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-16">
                <div class="flex flex-col items-center">
                    <label class="label-text mb-2 tracking-widest text-slate-400">Podpis zákazníka</label>
                    <div class="w-full relative">
                        <canvas id="customerSignature" class="signature-pad shadow-inner"></canvas>
                        <button type="button" onclick="clearSignature('customerSignature')" class="no-print absolute top-2 right-2 text-[10px] bg-white/90 px-3 py-1.5 rounded-full border shadow-sm font-bold active:bg-slate-100">VYMAZAŤ</button>
                    </div>
                </div>
                <div class="flex flex-col items-center">
                    <label class="label-text mb-2 tracking-widest text-red-600 italic">Podpis technika (Spektra)</label>
                    <div class="w-full relative">
                        <canvas id="technicianSignature" class="signature-pad shadow-inner border-red-100"></canvas>
                        <button type="button" onclick="clearSignature('technicianSignature')" class="no-print absolute top-2 right-2 text-[10px] bg-white/90 px-3 py-1.5 rounded-full border shadow-sm font-bold active:bg-slate-100 text-red-600">VYMAZAŤ</button>
                    </div>
                </div>
            </div>

            <div class="mt-16 no-print flex flex-col items-center gap-4">
                <button type="button" onclick="window.print()" class="w-full md:w-auto bg-red-600 text-white px-16 py-5 rounded-full font-[900] text-sm shadow-[0_15px_30px_-5px_rgba(225,29,72,0.4)] hover:bg-slate-800 transition-all transform active:scale-95 uppercase tracking-widest">
                    Vytlačiť protokol (PDF)
                </button>
                <p class="text-[9px] text-slate-400 uppercase font-black tracking-[0.2em]">Spektra Install &copy; 2026</p>
            </div>
        </form>
    </div>
    
    <footer class="mt-10 mb-20 text-center text-slate-400 text-[8px] font-black uppercase no-print tracking-[0.4em]">Verzia 3.3 | Mobile Ready</footer>
    
    <script>
        function updateDeviceView() {
            const selected = document.getElementById('deviceSelector').value;
            document.querySelectorAll('.device-section').forEach(s => s.classList.remove('active'));
            document.getElementById('section-' + selected).classList.add('active');
        }

        function initSignaturePad(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            let isDrawing = false;

            ctx.strokeStyle = "#1e293b";
            ctx.lineWidth = 3; // Hrubšia čiara pre mobil
            ctx.lineCap = "round";
            ctx.lineJoin = "round";

            function getMousePos(canvasDom, mouseEvent) {
                const rect = canvasDom.getBoundingClientRect();
                const clientX = mouseEvent.clientX || (mouseEvent.touches && mouseEvent.touches[0].clientX);
                const clientY = mouseEvent.clientY || (mouseEvent.touches && mouseEvent.touches[0].clientY);
                return {
                    x: clientX - rect.left,
                    y: clientY - rect.top
                };
            }

            function startDrawing(e) {
                isDrawing = true;
                const pos = getMousePos(canvas, e);
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
                if (e.type === 'touchstart') e.preventDefault();
            }

            function draw(e) {
                if (!isDrawing) return;
                const pos = getMousePos(canvas, e);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                if (e.type === 'touchmove') e.preventDefault();
            }

            function stopDrawing() {
                isDrawing = false;
            }

            canvas.addEventListener("mousedown", startDrawing);
            canvas.addEventListener("mousemove", draw);
            canvas.addEventListener("mouseup", stopDrawing);
            canvas.addEventListener("touchstart", startDrawing, {passive: false});
            canvas.addEventListener("touchmove", draw, {passive: false});
            canvas.addEventListener("touchend", stopDrawing);

            const resize = () => {
                const data = canvas.toDataURL();
                // Set display size
                canvas.style.width = '100%';
                // Set actual pixels
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                const img = new Image();
                img.onload = () => ctx.drawImage(img, 0, 0);
                img.src = data;
                
                // Reset styles after resize
                ctx.strokeStyle = "#1e293b";
                ctx.lineWidth = 3;
                ctx.lineCap = "round";
            };
            
            window.addEventListener('resize', resize);
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }

        function clearSignature(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        window.onload = function() {
            initSignaturePad('customerSignature');
            initSignaturePad('technicianSignature');
        };
    </script>
</body>
</html>
